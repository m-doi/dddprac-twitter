@startuml

package tweet <<core-domain>> {
    class Tweet  <<Root>> {
        - id : int
        - content : String
        --
        + {static} tweet(content : String) : Tweet
        + delete() : void
        + {static} reTweet(content : String, src : Tweet) : Tuple<Retweet, Tweet>
        + {static} replay(content : String, to : To, src : Option<Tweet>) : Tuple<Reply, Tweet>
        - addRelatedTweet(tweet : RelatedTweet) : Tweet
    }
    interface RelatedTweet
    class Retweet
    class Reply
    interface To

    RelatedTweet <|.. Reply
    RelatedTweet <|.. Retweet
    Tweet <|-- Reply
    Tweet <|-- Retweet
    Retweet "0..1" o-- "1" Tweet
    Reply "0..1" o-- "1" Tweet
    Tweet "1" *-- "0..*" RelatedTweet

    Reply "1" o-- "1" To
}



package user {
    class User <<Root>>
    class LoginUser {
        --
        getFollowingUsers() : List<FollowingUser>
    }

    User <|-- LoginUser

    class FollowingUser
    User "1" *-- "0..*" FollowingUser
}

User "1" *-- "0..*" Tweet : post
To <|.. User

package timeline {
    class TimeLine <<Root>> {
        --
        + {static} create(loginUser : LoginUser, followings : List<FollowingUser>) : TimeLine
    }
}

TimeLine "1" o-- "0..*" Tweet
TimeLine --> LoginUser
TimeLine --> FollowingUser




@enduml
